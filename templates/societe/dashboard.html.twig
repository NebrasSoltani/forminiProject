{% extends 'base.html.twig' %}

{% block title %}Dashboard Société{% endblock %}

{% block body %}
<div class="dashboard-container">
    <div class="container-fluid px-3 px-md-4 py-4">
        
        {# Hero Header avec Animation 3D #}
        <div class="row mb-5">
            <div class="col-12">
                <div class="dashboard-hero">
                    <div class="hero-particles">
                        <div class="particle"></div>
                        <div class="particle"></div>
                        <div class="particle"></div>
                        <div class="particle"></div>
                        <div class="particle"></div>
                    </div>
                    
                    <div class="hero-content-dash">
                        <div class="hero-left">
                            <div class="welcome-badge">
                                <span class="badge-pulse"></span>
                                <span>Tableau de bord</span>
                            </div>
                            <h1 class="dashboard-title">
                                <span class="title-gradient">Dashboard</span>
                                <span class="title-highlight">Société</span>
                            </h1>
                            <p class="dashboard-subtitle">Gérez vos offres et candidatures en temps réel</p>
                        </div>
                        
                        <div class="hero-right">
                            <a href="{{ path('societe_offre_new') }}" class="btn-create-offer">
                                <div class="btn-bg-effect"></div>
                                <i class="bi bi-plus-circle-fill"></i>
                                <span>Nouvelle Offre</span>
                                <div class="btn-shine"></div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        {# Statistiques Principales - Cards 3D #}
        <div class="row mb-5">
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="stat-card-3d stat-primary">
                    <div class="card-glow-effect"></div>
                    <div class="stat-background">
                        <div class="bg-pattern"></div>
                    </div>
                    <div class="stat-content">
                        <div class="stat-header">
                            <div class="stat-icon-wrapper">
                                <i class="bi bi-briefcase-fill"></i>
                            </div>
                            <div class="stat-trend">
                                <i class="bi bi-graph-up"></i>
                            </div>
                        </div>
                        <div class="stat-body">
                            <div class="stat-number">{{ totalOffres }}</div>
                            <div class="stat-label">Total Offres</div>
                        </div>
                        <div class="stat-footer">
                            <div class="progress-ring">
                                <svg width="60" height="60">
                                    <circle cx="30" cy="30" r="26" class="progress-ring-circle"></circle>
                                    <circle cx="30" cy="30" r="26" class="progress-ring-fill" 
                                            style="stroke-dashoffset: calc(163 - (163 * 100) / 100);"></circle>
                                </svg>
                                <span class="progress-text">100%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-3 col-md-6 mb-4">
                <div class="stat-card-3d stat-success">
                    <div class="card-glow-effect"></div>
                    <div class="stat-background">
                        <div class="bg-pattern"></div>
                    </div>
                    <div class="stat-content">
                        <div class="stat-header">
                            <div class="stat-icon-wrapper">
                                <i class="bi bi-check-circle-fill"></i>
                            </div>
                            <div class="stat-trend">
                                <i class="bi bi-graph-up"></i>
                            </div>
                        </div>
                        <div class="stat-body">
                            <div class="stat-number">{{ offresPubliees }}</div>
                            <div class="stat-label">Offres Publiées</div>
                        </div>
                        <div class="stat-footer">
                            <div class="progress-ring">
                                <svg width="60" height="60">
                                    <circle cx="30" cy="30" r="26" class="progress-ring-circle"></circle>
                                    <circle cx="30" cy="30" r="26" class="progress-ring-fill" 
                                            style="stroke-dashoffset: calc(163 - (163 * {{ totalOffres > 0 ? (offresPubliees / totalOffres * 100) : 0 }}) / 100);"></circle>
                                </svg>
                                <span class="progress-text">{{ totalOffres > 0 ? ((offresPubliees / totalOffres * 100)|round) : 0 }}%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-3 col-md-6 mb-4">
                <div class="stat-card-3d stat-info">
                    <div class="card-glow-effect"></div>
                    <div class="stat-background">
                        <div class="bg-pattern"></div>
                    </div>
                    <div class="stat-content">
                        <div class="stat-header">
                            <div class="stat-icon-wrapper">
                                <i class="bi bi-people-fill"></i>
                            </div>
                            <div class="stat-trend">
                                <i class="bi bi-graph-up"></i>
                            </div>
                        </div>
                        <div class="stat-body">
                            <div class="stat-number">{{ totalCandidatures }}</div>
                            <div class="stat-label">Candidatures</div>
                        </div>
                        <div class="stat-footer">
                            <div class="progress-ring">
                                <svg width="60" height="60">
                                    <circle cx="30" cy="30" r="26" class="progress-ring-circle"></circle>
                                    <circle cx="30" cy="30" r="26" class="progress-ring-fill" 
                                            style="stroke-dashoffset: calc(163 - (163 * 85) / 100);"></circle>
                                </svg>
                                <span class="progress-text">85%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-3 col-md-6 mb-4">
                <div class="stat-card-3d stat-warning">
                    <div class="card-glow-effect"></div>
                    <div class="stat-background">
                        <div class="bg-pattern"></div>
                    </div>
                    <div class="stat-content">
                        <div class="stat-header">
                            <div class="stat-icon-wrapper">
                                <i class="bi bi-hourglass-split"></i>
                            </div>
                            <div class="stat-trend stat-trend-pending">
                                <i class="bi bi-clock"></i>
                            </div>
                        </div>
                        <div class="stat-body">
                            <div class="stat-number">{{ candidaturesEnAttente }}</div>
                            <div class="stat-label">En Attente</div>
                        </div>
                        <div class="stat-footer">
                            <div class="progress-ring">
                                <svg width="60" height="60">
                                    <circle cx="30" cy="30" r="26" class="progress-ring-circle"></circle>
                                    <circle cx="30" cy="30" r="26" class="progress-ring-fill" 
                                            style="stroke-dashoffset: calc(163 - (163 * {{ totalCandidatures > 0 ? (candidaturesEnAttente / totalCandidatures * 100) : 0 }}) / 100);"></circle>
                                </svg>
                                <span class="progress-text">{{ totalCandidatures > 0 ? ((candidaturesEnAttente / totalCandidatures * 100)|round) : 0 }}%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        {# Graphiques et Statistiques Détaillées #}
        <div class="row mb-5">
            <div class="col-lg-6 mb-4">
                <div class="analytics-card">
                    <div class="card-header-modern">
                        <div class="header-icon">
                            <i class="bi bi-pie-chart-fill"></i>
                        </div>
                        <h3>Statistiques Candidatures</h3>
                        <div class="header-actions">
                            <button class="btn-icon-action">
                                <i class="bi bi-three-dots"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="card-body-modern">
                        <div class="stats-grid">
                            <div class="stat-item-modern stat-pending">
                                <div class="stat-icon-circle">
                                    <i class="bi bi-clock-history"></i>
                                    <div class="icon-ring"></div>
                                </div>
                                <div class="stat-details">
                                    <div class="stat-value-large">{{ candidaturesEnAttente }}</div>
                                    <div class="stat-label-small">En attente</div>
                                    <div class="stat-bar">
                                        <div class="stat-bar-fill" style="width: {{ totalCandidatures > 0 ? (candidaturesEnAttente / totalCandidatures * 100) : 0 }}%"></div>
                                    </div>
                                </div>
                            </div>

                            <div class="stat-item-modern stat-accepted">
                                <div class="stat-icon-circle">
                                    <i class="bi bi-check2-circle"></i>
                                    <div class="icon-ring"></div>
                                </div>
                                <div class="stat-details">
                                    <div class="stat-value-large">{{ candidaturesAcceptees }}</div>
                                    <div class="stat-label-small">Acceptées</div>
                                    <div class="stat-bar">
                                        <div class="stat-bar-fill" style="width: {{ totalCandidatures > 0 ? (candidaturesAcceptees / totalCandidatures * 100) : 0 }}%"></div>
                                    </div>
                                </div>
                            </div>

                            <div class="stat-item-modern stat-rejected">
                                <div class="stat-icon-circle">
                                    <i class="bi bi-x-circle"></i>
                                    <div class="icon-ring"></div>
                                </div>
                                <div class="stat-details">
                                    <div class="stat-value-large">{{ candidaturesRefusees }}</div>
                                    <div class="stat-label-small">Refusées</div>
                                    <div class="stat-bar">
                                        <div class="stat-bar-fill" style="width: {{ totalCandidatures > 0 ? (candidaturesRefusees / totalCandidatures * 100) : 0 }}%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="chart-summary">
                            <div class="summary-item">
                                <span class="summary-label">Taux de réponse</span>
                                <span class="summary-value">
                                    {{ totalCandidatures > 0 ? (((candidaturesAcceptees + candidaturesRefusees) / totalCandidatures * 100)|round) : 0 }}%
                                </span>
                            </div>
                            <div class="summary-divider"></div>
                            <div class="summary-item">
                                <span class="summary-label">Taux d'acceptation</span>
                                <span class="summary-value">
                                    {{ (candidaturesAcceptees + candidaturesRefusees) > 0 ? ((candidaturesAcceptees / (candidaturesAcceptees + candidaturesRefusees) * 100)|round) : 0 }}%
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-6 mb-4">
                <div class="analytics-card">
                    <div class="card-header-modern">
                        <div class="header-icon">
                            <i class="bi bi-bar-chart-fill"></i>
                        </div>
                        <h3>Statistiques Offres</h3>
                        <div class="header-actions">
                            <button class="btn-icon-action">
                                <i class="bi bi-three-dots"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="card-body-modern">
                        <div class="stats-grid">
                            <div class="stat-item-modern stat-published">
                                <div class="stat-icon-circle">
                                    <i class="bi bi-globe2"></i>
                                    <div class="icon-ring"></div>
                                </div>
                                <div class="stat-details">
                                    <div class="stat-value-large">{{ offresPubliees }}</div>
                                    <div class="stat-label-small">Publiées</div>
                                    <div class="stat-bar">
                                        <div class="stat-bar-fill" style="width: {{ totalOffres > 0 ? (offresPubliees / totalOffres * 100) : 0 }}%"></div>
                                    </div>
                                </div>
                            </div>

                            <div class="stat-item-modern stat-closed">
                                <div class="stat-icon-circle">
                                    <i class="bi bi-lock-fill"></i>
                                    <div class="icon-ring"></div>
                                </div>
                                <div class="stat-details">
                                    <div class="stat-value-large">{{ offresFermees }}</div>
                                    <div class="stat-label-small">Fermées</div>
                                    <div class="stat-bar">
                                        <div class="stat-bar-fill" style="width: {{ totalOffres > 0 ? (offresFermees / totalOffres * 100) : 0 }}%"></div>
                                    </div>
                                </div>
                            </div>

                            <div class="stat-item-modern stat-expired">
                                <div class="stat-icon-circle">
                                    <i class="bi bi-exclamation-triangle-fill"></i>
                                    <div class="icon-ring"></div>
                                </div>
                                <div class="stat-details">
                                    <div class="stat-value-large">{{ offresExpirees }}</div>
                                    <div class="stat-label-small">Expirées</div>
                                    <div class="stat-bar">
                                        <div class="stat-bar-fill" style="width: {{ totalOffres > 0 ? (offresExpirees / totalOffres * 100) : 0 }}%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="chart-summary">
                            <div class="summary-item">
                                <span class="summary-label">Offres actives</span>
                                <span class="summary-value">{{ offresPubliees }}</span>
                            </div>
                            <div class="summary-divider"></div>
                            <div class="summary-item">
                                <span class="summary-label">Taux de publication</span>
                                <span class="summary-value">
                                    {{ totalOffres > 0 ? ((offresPubliees / totalOffres * 100)|round) : 0 }}%
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        {# Dernières Candidatures - Timeline Style #}
        <div class="row mb-5">
            <div class="col-12">
                <div class="recent-applications-card">
                    <div class="card-header-featured">
                        <div class="header-left-section">
                            <div class="header-icon-featured">
                                <i class="bi bi-clock-history"></i>
                            </div>
                            <div>
                                <h3>Dernières Candidatures</h3>
                                <p>Candidatures récentes reçues</p>
                            </div>
                        </div>
                        <a href="{{ path('societe_offres_index') }}" class="btn-view-all">
                            <span>Voir tout</span>
                            <i class="bi bi-arrow-right"></i>
                        </a>
                    </div>

                    <div class="card-body-featured">
                        {% if dernieresCandidatures is empty %}
                            <div class="empty-state-inline">
                                <div class="empty-icon-inline">
                                    <i class="bi bi-inbox"></i>
                                </div>
                                <div class="empty-text-inline">
                                    <h4>Aucune candidature</h4>
                                    <p>Les nouvelles candidatures apparaîtront ici</p>
                                </div>
                            </div>
                        {% else %}
                            <div class="applications-timeline">
                                {% for candidature in dernieresCandidatures %}
                                    <div class="timeline-application-item">
                                        <div class="timeline-marker">
                                            <div class="marker-dot"></div>
                                            <div class="marker-line"></div>
                                        </div>
                                        
                                        <div class="application-card-mini">
                                            <div class="app-mini-header">
                                                <div class="candidate-avatar">
                                                    <span>{{ candidature.apprenant.nom|slice(0, 1) }}{{ candidature.apprenant.prenom|slice(0, 1) }}</span>
                                                </div>
                                                <div class="candidate-info">
                                                    <h4>{{ candidature.apprenant.nom }} {{ candidature.apprenant.prenom }}</h4>
                                                    <p>{{ candidature.apprenant.email }}</p>
                                                </div>
                                                <div class="app-status">
                                                    {% if candidature.statut == 'en_attente' %}
                                                        <span class="status-pill status-pending">
                                                            <i class="bi bi-clock"></i> En attente
                                                        </span>
                                                    {% elseif candidature.statut == 'acceptee' %}
                                                        <span class="status-pill status-accepted">
                                                            <i class="bi bi-check-circle-fill"></i> Acceptée
                                                        </span>
                                                    {% else %}
                                                        <span class="status-pill status-rejected">
                                                            <i class="bi bi-x-circle-fill"></i> Refusée
                                                        </span>
                                                    {% endif %}
                                                </div>
                                            </div>

                                            <div class="app-mini-body">
                                                <div class="offer-tag">
                                                    <i class="bi bi-briefcase"></i>
                                                    <span>{{ candidature.offreStage.titre }}</span>
                                                </div>
                                                <div class="company-tag">
                                                    <i class="bi bi-building"></i>
                                                    <span>{{ candidature.offreStage.entreprise }}</span>
                                                </div>
                                                <div class="date-tag">
                                                    <i class="bi bi-calendar3"></i>
                                                    <span>{{ candidature.dateCandidature|date('d/m/Y H:i') }}</span>
                                                </div>
                                            </div>

                                            <div class="app-mini-footer">
                                                <a href="{{ path('societe_offre_show', {id: candidature.offreStage.id}) }}" 
                                                   class="btn-view-application">
                                                    <i class="bi bi-eye"></i>
                                                    <span>Consulter</span>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>

        {# Offres Actives - Grid Moderne #}
        {% if offresPubliees > 0 %}
        <div class="row">
            <div class="col-12">
                <div class="active-offers-section">
                    <div class="section-header-premium">
                        <div class="header-decoration"></div>
                        <div class="header-content-premium">
                            <i class="bi bi-briefcase-fill"></i>
                            <h3>Mes Offres Actives</h3>
                        </div>
                    </div>

                    <div class="offers-grid-premium">
                        {% for offre in activeOffres|default([]) %}
                                <div class="offer-card-premium">
                                    <div class="offer-card-glow"></div>
                                    <div class="offer-badge-active">
                                        <span class="badge-dot-active"></span>
                                        Active
                                    </div>
                                    
                                    <div class="offer-icon-large">
                                        <i class="bi bi-file-earmark-text"></i>
                                    </div>

                                    <h4 class="offer-title-premium">{{ offre.titre }}</h4>
                                    <p class="offer-company">{{ offre.entreprise }}</p>

                                    <div class="offer-stats-mini">
                                        <div class="stat-mini-item">
                                            <i class="bi bi-people"></i>
                                            <span>{{ offre.candidatures|length }}</span>
                                        </div>
                                        <div class="stat-mini-item">
                                            <i class="bi bi-clock"></i>
                                            <span>Active</span>
                                        </div>
                                    </div>

                                    <a href="{{ path('societe_offre_show', {id: offre.id}) }}" 
                                       class="btn-manage-offer">
                                        <span>Gérer l'offre</span>
                                        <i class="bi bi-arrow-right-circle-fill"></i>
                                    </a>
                                </div>
                        {% endfor %}
                    </div>

                    {% if activePages|default(1) > 1 %}
                        <nav aria-label="Pagination" class="mt-4">
                            <ul class="pagination justify-content-center mb-0">
                                <li class="page-item {% if pageOffres|default(1) <= 1 %}disabled{% endif %}">
                                    <a class="page-link" href="{{ path('societe_dashboard', {pageOffres: (pageOffres|default(1) - 1), limitOffres: limitOffres|default(6)}) }}" tabindex="-1">Previous</a>
                                </li>
                                <li class="page-item disabled">
                                    <span class="page-link">Page {{ pageOffres|default(1) }} / {{ activePages|default(1) }}</span>
                                </li>
                                <li class="page-item {% if pageOffres|default(1) >= activePages|default(1) %}disabled{% endif %}">
                                    <a class="page-link" href="{{ path('societe_dashboard', {pageOffres: (pageOffres|default(1) + 1), limitOffres: limitOffres|default(6)}) }}">Next</a>
                                </li>
                            </ul>
                        </nav>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endif %}

    </div>
</div>

<style>
:root {
    --primary: #667eea;
    --primary-dark: #5568d3;
    --secondary: #764ba2;
    --accent: #f093fb;
    --success: #10b981;
    --warning: #f59e0b;
    --danger: #ef4444;
    --info: #3b82f6;
    --dark: #0f172a;
    --gray: #64748b;
    --light: #f8fafc;
}

body {
    background: #f1f5f9;
}

.dashboard-container {
    min-height: 100vh;
}

/* Hero Dashboard */
.dashboard-hero {
    position: relative;
    padding: 50px 40px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 32px;
    overflow: hidden;
    box-shadow: 0 24px 64px rgba(102, 126, 234, 0.25);
}

.hero-particles {
    position: absolute;
    inset: 0;
}

.particle {
    position: absolute;
    width: 10px;
    height: 10px;
    background: white;
    border-radius: 50%;
    opacity: 0.2;
    animation: floatParticles 15s ease-in-out infinite;
}

.particle:nth-child(1) { left: 10%; top: 20%; animation-delay: 0s; }
.particle:nth-child(2) { left: 30%; top: 60%; animation-delay: 2s; }
.particle:nth-child(3) { right: 20%; top: 30%; animation-delay: 4s; }
.particle:nth-child(4) { right: 40%; bottom: 20%; animation-delay: 6s; }
.particle:nth-child(5) { left: 50%; top: 50%; animation-delay: 8s; }

@keyframes floatParticles {
    0%, 100% { transform: translateY(0) scale(1); }
    50% { transform: translateY(-30px) scale(1.5); }
}

.hero-content-dash {
    position: relative;
    z-index: 2;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 32px;
}

.welcome-badge {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 10px 20px;
    background: rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(10px);
    border-radius: 50px;
    border: 1px solid rgba(255, 255, 255, 0.3);
    color: white;
    font-weight: 700;
    font-size: 0.875rem;
    margin-bottom: 16px;
}

.badge-pulse {
    width: 8px;
    height: 8px;
    background: #10b981;
    border-radius: 50%;
    animation: pulse 2s ease-in-out infinite;
}

.dashboard-title {
    font-size: 3rem;
    font-weight: 900;
    color: white;
    margin-bottom: 8px;
    line-height: 1.2;
}

.title-gradient {
    background: linear-gradient(180deg, #fff 0%, rgba(255, 255, 255, 0.8) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.title-highlight {
    color: white;
    text-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
}

.dashboard-subtitle {
    color: rgba(255, 255, 255, 0.9);
    font-size: 1.125rem;
    margin: 0;
}

.btn-create-offer {
    position: relative;
    display: inline-flex;
    align-items: center;
    gap: 12px;
    padding: 18px 32px;
    background: white;
    color: var(--primary);
    border-radius: 16px;
    font-weight: 900;
    font-size: 1.0625rem;
    text-decoration: none;
    overflow: hidden;
    box-shadow: 0 12px 32px rgba(0, 0, 0, 0.2);
    transition: all 0.4s ease;
}

.btn-create-offer:hover {
    transform: translateY(-4px);
    box-shadow: 0 20px 48px rgba(0, 0, 0, 0.3);
    color: var(--primary);
}

.btn-create-offer i {
    font-size: 1.5rem;
}

.btn-bg-effect {
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), transparent);
    opacity: 0;
    transition: opacity 0.4s ease;
}

.btn-create-offer:hover .btn-bg-effect {
    opacity: 1;
}

.btn-shine {
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(45deg, transparent 30%, rgba(102, 126, 234, 0.2) 50%, transparent 70%);
    transform: translateX(-100%) rotate(45deg);
    transition: transform 0.6s ease;
}

.btn-create-offer:hover .btn-shine {
    transform: translateX(100%) rotate(45deg);
}

/* Stat Cards 3D */
.stat-card-3d {
    position: relative;
    background: white;
    border-radius: 24px;
    padding: 28px;
    overflow: hidden;
    transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
    height: 100%;
    border: 1px solid rgba(15, 23, 42, 0.06);
}

.stat-card-3d:hover {
    transform: translateY(-12px) scale(1.02);
    box-shadow: 0 24px 64px rgba(0, 0, 0, 0.15);
}

.card-glow-effect {
    position: absolute;
    inset: 0;
    opacity: 0;
    transition: opacity 0.5s ease;
    pointer-events: none;
}

.stat-primary .card-glow-effect {
    background: radial-gradient(circle at 50% 50%, rgba(102, 126, 234, 0.2), transparent 70%);
}

.stat-success .card-glow-effect {
    background: radial-gradient(circle at 50% 50%, rgba(16, 185, 129, 0.2), transparent 70%);
}

.stat-info .card-glow-effect {
    background: radial-gradient(circle at 50% 50%, rgba(59, 130, 246, 0.2), transparent 70%);
}

.stat-warning .card-glow-effect {
    background: radial-gradient(circle at 50% 50%, rgba(245, 158, 11, 0.2), transparent 70%);
}

.stat-card-3d:hover .card-glow-effect {
    opacity: 1;
}

.stat-background {
    position: absolute;
    top: 0;
    right: 0;
    width: 200px;
    height: 200px;
    opacity: 0.05;
    pointer-events: none;
}

.bg-pattern {
    width: 100%;
    height: 100%;
    background: radial-gradient(circle, currentColor 1px, transparent 1px);
    background-size: 20px 20px;
    animation: patternMove 20s linear infinite;
}

@keyframes patternMove {
    0% { transform: translate(0, 0); }
    100% { transform: translate(20px, 20px); }
}

.stat-primary .bg-pattern { color: var(--primary); }
.stat-success .bg-pattern { color: var(--success); }
.stat-info .bg-pattern { color: var(--info); }
.stat-warning .bg-pattern { color: var(--warning); }

.stat-content {
    position: relative;
    z-index: 2;
}

.stat-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 20px;
}

.stat-icon-wrapper {
    width: 64px;
    height: 64px;
    border-radius: 18px;
    display: grid;
    place-items: center;
    position: relative;
    transition: all 0.4s ease;
}

.stat-primary .stat-icon-wrapper {
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.15), rgba(118, 75, 162, 0.15));
}

.stat-success .stat-icon-wrapper {
    background: linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(5, 150, 105, 0.15));
}

.stat-info .stat-icon-wrapper {
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.15), rgba(37, 99, 235, 0.15));
}

.stat-warning .stat-icon-wrapper {
    background: linear-gradient(135deg, rgba(245, 158, 11, 0.15), rgba(217, 119, 6, 0.15));
}

.stat-card-3d:hover .stat-icon-wrapper {
    transform: rotate(10deg) scale(1.1);
}

.stat-icon-wrapper i {
    font-size: 2rem;
}

.stat-primary .stat-icon-wrapper i { color: var(--primary); }
.stat-success .stat-icon-wrapper i { color: var(--success); }
.stat-info .stat-icon-wrapper i { color: var(--info); }
.stat-warning .stat-icon-wrapper i { color: var(--warning); }

.stat-trend {
    width: 36px;
    height: 36px;
    border-radius: 10px;
    background: rgba(16, 185, 129, 0.1);
    display: grid;
    place-items: center;
    color: var(--success);
}

.stat-trend-pending {
    background: rgba(245, 158, 11, 0.1);
    color: var(--warning);
}

.stat-trend i {
    font-size: 1.125rem;
}

.stat-body {
    margin-bottom: 24px;
}

.stat-number {
    font-size: 3rem;
    font-weight: 900;
    color: var(--dark);
    line-height: 1;
    margin-bottom: 8px;
}

.stat-label {
    font-size: 0.875rem;
    font-weight: 700;
    color: var(--gray);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.stat-footer {
    display: flex;
    justify-content: flex-end;
}

.progress-ring {
    position: relative;
    width: 60px;
    height: 60px;
}

.progress-ring svg {
    transform: rotate(-90deg);
}

.progress-ring-circle {
    fill: none;
    stroke: rgba(15, 23, 42, 0.1);
    stroke-width: 4;
}

.progress-ring-fill {
    fill: none;
    stroke-width: 4;
    stroke-dasharray: 163;
    transition: stroke-dashoffset 1s ease;
}

.stat-primary .progress-ring-fill { stroke: var(--primary); }
.stat-success .progress-ring-fill { stroke: var(--success); }
.stat-info .progress-ring-fill { stroke: var(--info); }
.stat-warning .progress-ring-fill { stroke: var(--warning); }

.progress-text {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 0.75rem;
    font-weight: 900;
    color: var(--dark);
}

/* Analytics Cards */
.analytics-card {
    background: white;
    border-radius: 24px;
    overflow: hidden;
    box-shadow: 0 8px 24px rgba(15, 23, 42, 0.08);
    border: 1px solid rgba(15, 23, 42, 0.06);
    height: 100%;
}

.card-header-modern {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 24px 28px;
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.05), rgba(118, 75, 162, 0.05));
    border-bottom: 2px solid rgba(15, 23, 42, 0.06);
}

.header-icon {
    width: 48px;
    height: 48px;
    border-radius: 14px;
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    display: grid;
    place-items: center;
    color: white;
}

.header-icon i {
    font-size: 1.5rem;
}

.card-header-modern h3 {
    flex: 1;
    font-size: 1.25rem;
    font-weight: 900;
    color: var(--dark);
    margin: 0;
}

.btn-icon-action {
    width: 36px;
    height: 36px;
    border-radius: 10px;
    border: none;
    background: white;
    color: var(--gray);
    display: grid;
    place-items: center;
    cursor: pointer;
    transition: all 0.3s ease;
}

.btn-icon-action:hover {
    background: var(--light);
    color: var(--primary);
}

.card-body-modern {
    padding: 28px;
}

.stats-grid {
    display: grid;
    gap: 20px;
    margin-bottom: 24px;
}

.stat-item-modern {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 20px;
    background: var(--light);
    border-radius: 16px;
    border: 2px solid transparent;
    transition: all 0.3s ease;
}

.stat-item-modern:hover {
    border-color: currentColor;
    transform: translateX(8px);
}

.stat-pending { color: var(--warning); }
.stat-accepted { color: var(--success); }
.stat-rejected { color: var(--danger); }
.stat-published { color: var(--success); }
.stat-closed { color: var(--gray); }
.stat-expired { color: var(--danger); }

.stat-icon-circle {
    position: relative;
    width: 56px;
    height: 56px;
    border-radius: 50%;
    display: grid;
    place-items: center;
    flex-shrink: 0;
    background: white;
}

.stat-icon-circle i {
    font-size: 1.5rem;
    position: relative;
    z-index: 2;
}

.icon-ring {
    position: absolute;
    inset: -4px;
    border-radius: 50%;
    border: 2px solid currentColor;
    opacity: 0.2;
}

.stat-details {
    flex: 1;
}

.stat-value-large {
    font-size: 2rem;
    font-weight: 900;
    color: var(--dark);
    line-height: 1;
    margin-bottom: 4px;
}

.stat-label-small {
    font-size: 0.875rem;
    font-weight: 700;
    color: var(--gray);
    margin-bottom: 8px;
}

.stat-bar {
    width: 100%;
    height: 6px;
    background: rgba(15, 23, 42, 0.1);
    border-radius: 3px;
    overflow: hidden;
}

.stat-bar-fill {
    height: 100%;
    background: currentColor;
    border-radius: 3px;
    transition: width 1s ease;
}

.chart-summary {
    display: flex;
    align-items: center;
    gap: 24px;
    padding: 20px;
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.05), rgba(118, 75, 162, 0.05));
    border-radius: 14px;
}

.summary-item {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.summary-label {
    font-size: 0.875rem;
    font-weight: 700;
    color: var(--gray);
}

.summary-value {
    font-size: 1.5rem;
    font-weight: 900;
    color: var(--primary);
}

.summary-divider {
    width: 2px;
    height: 40px;
    background: rgba(15, 23, 42, 0.1);
}

/* Recent Applications */
.recent-applications-card {
    background: white;
    border-radius: 24px;
    overflow: hidden;
    box-shadow: 0 8px 24px rgba(15, 23, 42, 0.08);
    border: 1px solid rgba(15, 23, 42, 0.06);
}

.card-header-featured {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 28px;
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.05), rgba(118, 75, 162, 0.05));
    border-bottom: 2px solid rgba(15, 23, 42, 0.06);
}

.header-left-section {
    display: flex;
    align-items: center;
    gap: 16px;
}

.header-icon-featured {
    width: 56px;
    height: 56px;
    border-radius: 16px;
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    display: grid;
    place-items: center;
    color: white;
}

.header-icon-featured i {
    font-size: 1.75rem;
}

.header-left-section h3 {
    font-size: 1.5rem;
    font-weight: 900;
    color: var(--dark);
    margin-bottom: 4px;
}

.header-left-section p {
    color: var(--gray);
    font-size: 0.9375rem;
    margin: 0;
}

.btn-view-all {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 12px 24px;
    background: white;
    color: var(--primary);
    border: 2px solid var(--primary);
    border-radius: 12px;
    font-weight: 800;
    text-decoration: none;
    transition: all 0.3s ease;
}

.btn-view-all:hover {
    background: var(--primary);
    color: white;
    transform: translateY(-2px);
}

.card-body-featured {
    padding: 28px;
}

.empty-state-inline {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 60px 40px;
    text-align: center;
}

.empty-icon-inline {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
    display: grid;
    place-items: center;
    margin-bottom: 24px;
}

.empty-icon-inline i {
    font-size: 3rem;
    color: var(--primary);
}

.empty-text-inline h4 {
    font-size: 1.5rem;
    font-weight: 900;
    color: var(--dark);
    margin-bottom: 8px;
}

.empty-text-inline p {
    color: var(--gray);
    font-size: 1rem;
    margin: 0;
}

.applications-timeline {
    display: flex;
    flex-direction: column;
    gap: 24px;
}

.timeline-application-item {
    display: flex;
    gap: 24px;
}

.timeline-marker {
    display: flex;
    flex-direction: column;
    align-items: center;
    flex-shrink: 0;
}

.marker-dot {
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background: var(--primary);
    border: 3px solid rgba(102, 126, 234, 0.2);
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
}

.marker-line {
    flex: 1;
    width: 2px;
    background: linear-gradient(180deg, rgba(102, 126, 234, 0.3), transparent);
    margin-top: 8px;
}

.timeline-application-item:last-child .marker-line {
    display: none;
}

.application-card-mini {
    flex: 1;
    background: var(--light);
    border-radius: 16px;
    padding: 20px;
    border: 1px solid rgba(15, 23, 42, 0.06);
    transition: all 0.3s ease;
}

.application-card-mini:hover {
    transform: translateX(8px);
    box-shadow: 0 8px 24px rgba(15, 23, 42, 0.1);
}

.app-mini-header {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-bottom: 16px;
}

.candidate-avatar {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    display: grid;
    place-items: center;
    color: white;
    font-weight: 900;
    font-size: 1rem;
    flex-shrink: 0;
}

.candidate-info {
    flex: 1;
}

.candidate-info h4 {
    font-size: 1rem;
    font-weight: 900;
    color: var(--dark);
    margin-bottom: 2px;
}

.candidate-info p {
    font-size: 0.875rem;
    color: var(--gray);
    margin: 0;
}

.status-pill {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 8px 14px;
    border-radius: 999px;
    font-weight: 700;
    font-size: 0.8125rem;
    white-space: nowrap;
}

.status-pending {
    background: rgba(245, 158, 11, 0.15);
    color: #d97706;
}

.status-accepted {
    background: rgba(16, 185, 129, 0.15);
    color: #059669;
}

.status-rejected {
    background: rgba(239, 68, 68, 0.15);
    color: #dc2626;
}

.app-mini-body {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-bottom: 16px;
}

.offer-tag,
.company-tag,
.date-tag {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 12px;
    background: white;
    border-radius: 10px;
    font-size: 0.875rem;
    font-weight: 700;
    color: var(--dark);
}

.offer-tag i,
.company-tag i,
.date-tag i {
    color: var(--primary);
}

.app-mini-footer {
    display: flex;
    justify-content: flex-end;
}

.btn-view-application {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 10px 18px;
    background: white;
    color: var(--primary);
    border: 2px solid var(--primary);
    border-radius: 10px;
    font-weight: 800;
    font-size: 0.875rem;
    text-decoration: none;
    transition: all 0.3s ease;
}

.btn-view-application:hover {
    background: var(--primary);
    color: white;
}

/* Active Offers Section */
.active-offers-section {
    background: white;
    border-radius: 24px;
    padding: 32px;
    box-shadow: 0 8px 24px rgba(15, 23, 42, 0.08);
    border: 1px solid rgba(15, 23, 42, 0.06);
}

.section-header-premium {
    position: relative;
    margin-bottom: 32px;
}

.header-decoration {
    height: 4px;
    width: 60px;
    background: linear-gradient(90deg, var(--primary), var(--secondary));
    border-radius: 2px;
    margin-bottom: 16px;
}

.header-content-premium {
    display: flex;
    align-items: center;
    gap: 12px;
}

.header-content-premium i {
    font-size: 2rem;
    color: var(--primary);
}

.header-content-premium h3 {
    font-size: 1.75rem;
    font-weight: 900;
    color: var(--dark);
    margin: 0;
}

.offers-grid-premium {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 24px;
}

.offer-card-premium {
    position: relative;
    background: var(--light);
    border-radius: 20px;
    padding: 28px;
    border: 2px solid transparent;
    transition: all 0.4s ease;
    overflow: hidden;
}

.offer-card-premium:hover {
    transform: translateY(-8px);
    border-color: var(--primary);
    box-shadow: 0 16px 48px rgba(102, 126, 234, 0.2);
}

.offer-card-glow {
    position: absolute;
    inset: 0;
    background: radial-gradient(circle at 50% 0%, rgba(102, 126, 234, 0.1), transparent 70%);
    opacity: 0;
    transition: opacity 0.4s ease;
}

.offer-card-premium:hover .offer-card-glow {
    opacity: 1;
}

.offer-badge-active {
    position: absolute;
    top: 20px;
    right: 20px;
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 6px 12px;
    background: linear-gradient(135deg, var(--success), #059669);
    color: white;
    border-radius: 999px;
    font-weight: 700;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.badge-dot-active {
    width: 6px;
    height: 6px;
    background: white;
    border-radius: 50%;
    animation: pulse 2s ease-in-out infinite;
}

.offer-icon-large {
    width: 72px;
    height: 72px;
    border-radius: 18px;
    background: white;
    display: grid;
    place-items: center;
    margin-bottom: 20px;
    position: relative;
    z-index: 2;
}

.offer-icon-large i {
    font-size: 2rem;
    color: var(--primary);
}

.offer-title-premium {
    font-size: 1.25rem;
    font-weight: 900;
    color: var(--dark);
    margin-bottom: 8px;
    position: relative;
    z-index: 2;
}

.offer-company {
    font-size: 0.9375rem;
    font-weight: 700;
    color: var(--gray);
    margin-bottom: 20px;
    position: relative;
    z-index: 2;
}

.offer-stats-mini {
    display: flex;
    gap: 16px;
    margin-bottom: 20px;
    position: relative;
    z-index: 2;
}

.stat-mini-item {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 12px;
    background: white;
    border-radius: 10px;
    font-weight: 700;
    font-size: 0.875rem;
    color: var(--dark);
}

.stat-mini-item i {
    color: var(--primary);
}

.btn-manage-offer {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    width: 100%;
    padding: 14px 24px;
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    color: white;
    border-radius: 12px;
    font-weight: 900;
    text-decoration: none;
    transition: all 0.3s ease;
    position: relative;
    z-index: 2;
}

.btn-manage-offer:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(102, 126, 234, 0.4);
    color: white;
}

.btn-manage-offer i {
    font-size: 1.25rem;
}

/* Responsive */
@media (max-width: 992px) {
    .hero-content-dash {
        flex-direction: column;
        align-items: flex-start;
    }
    
    .dashboard-title {
        font-size: 2.5rem;
    }
}

@media (max-width: 768px) {
    .dashboard-title {
        font-size: 2rem;
    }
    
    .stats-grid {
        grid-template-columns: 1fr;
    }
    
    .timeline-marker {
        display: none;
    }
    
    .offers-grid-premium {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 576px) {
    .dashboard-hero {
        padding: 40px 24px;
    }
    
    .chart-summary {
        flex-direction: column;
        gap: 16px;
    }
    
    .summary-divider {
        width: 100%;
        height: 2px;
    }
}
</style>
{% endblock %}
