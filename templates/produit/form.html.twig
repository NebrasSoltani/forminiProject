{% extends 'base.html.twig' %}

{% block title %}{{ produit.id ? 'Modifier' : 'Nouveau' }} Produit{% endblock %}

{% block body %}
<style>
body {
    background: linear-gradient(135deg, #f9f7fe 0%, #e6f2ff 100%);
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    font-family: 'Segoe UI', system-ui, sans-serif;
}

.form-card {
    max-width: 600px;
    width: 100%;
    border-radius: 18px;
    overflow: hidden;
    background: #fff;
    box-shadow: 0 10px 25px rgba(0,0,0,0.08);
}

.main-container {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
}

.form-header {
    background: linear-gradient(90deg, #8e2de2, #4a00e0);
    color: white;
    padding: 1.5rem;
    text-align: center;
}

.form-header h3 {
    font-weight: 700;
    font-size: 1.4rem;
}

.form-body {
    padding: 1.2rem;
}

.form-section {
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid #edf2f7;
}

.section-title {
    display: flex;
    align-items: center;
    gap: 10px;
    color: #4a00e0;
    font-weight: 700;
    margin-bottom: 0.9rem;
}

.field-group {
    position: relative;
}

.field-group i {
    position: absolute;
    left: 10px;
    top: 50%;
    transform: translateY(-50%);
    color: #94a3b8;
    font-size: 0.8rem;
}

.form-control,
.form-select {
    border-radius: 12px;
    border: 2px solid #e2e8f0;
    padding: 0.5rem 1rem 0.5rem 35px;
    background: #fafbff;
    transition: 0.3s;
    width: 100%;
    font-size: 0.9rem;
}

.form-control:focus,
.form-select:focus {
    border-color: #8e2de2;
    background: white;
    box-shadow: 0 0 0 0.2rem rgba(142,45,226,.15);
}

textarea.form-control {
    resize: none;
}

.text-danger {
    background: #fff1f2;
    padding: 4px 8px;
    border-radius: 6px;
    font-size: 0.8rem;
    margin-top: 3px;
}

.btn-cancel, .btn-submit {
    padding: 0.5rem 1.3rem;
    font-size: 0.9rem;
    border-radius: 10px;
}

.btn-cancel {
    background: #f1f5f9;
    border: 1px solid #cbd5e1;
}

.btn-submit {
    background: linear-gradient(90deg, #ff416c, #ff4b2b);
    border: none;
    color: white;
    font-weight: 600;
    box-shadow: 0 5px 12px rgba(255,75,43,.3);
    transition: 0.3s;
}

.btn-submit:hover {
    transform: translateY(-2px);
}
</style>

<div class="main-container">
{{ form_start(form, {'attr': {'enctype': 'multipart/form-data'}}) }}

<div class="form-card">

    <!-- HEADER -->
    <div class="form-header">
        <h3>
            <i class="{{ produit.id ? 'fas fa-edit' : 'fas fa-plus-circle' }}"></i>
            {{ produit.id ? 'Modifier le produit' : 'Ajouter un nouveau produit' }}
        </h3>
    </div>

    <div class="form-body">

        <!-- INFOS -->
        <div class="form-section">
            <div class="section-title">
                <i class="fas fa-info-circle"></i> Informations générales
            </div>

            <div class="row g-3">
                <div class="col-md-6">
                    {{ form_label(form.nom) }}
                    <div class="field-group">
                        <i class="fas fa-box"></i>
                        {{ form_widget(form.nom, {'attr': {'class': 'form-control'}}) }}
                    </div>
                    {{ form_errors(form.nom) }}
                </div>

                <div class="col-md-6">
                    {{ form_label(form.categorie) }}
                    <div class="field-group">
                        <i class="fas fa-list"></i>
                        {{ form_widget(form.categorie, {'attr': {'class': 'form-select'}}) }}
                    </div>
                    {{ form_errors(form.categorie) }}
                </div>

                <div class="col-12">
                    {{ form_label(form.description) }}
                    <div class="field-group">
                        <i class="fas fa-align-left"></i>
                        {{ form_widget(form.description, {'attr': {'class': 'form-control', 'rows': 3}}) }}
                    </div>
                    {{ form_errors(form.description) }}
                </div>
            </div>
        </div>

        <!-- DETAILS -->
        <div class="form-section">
            <div class="section-title">
                <i class="fas fa-tag"></i> Détails commerciaux
            </div>

            <div class="row g-3">
                <div class="col-md-4">
                    {{ form_label(form.prix) }}
                    <div class="field-group">
                        <i class="fas fa-coins"></i>
                        {{ form_widget(form.prix, {'attr': {'class': 'form-control'}}) }}
                    </div>
                    {{ form_errors(form.prix) }}
                </div>

                <div class="col-md-4">
                    {{ form_label(form.stock) }}
                    <div class="field-group">
                        <i class="fas fa-layer-group"></i>
                        {{ form_widget(form.stock, {'attr': {'class': 'form-control'}}) }}
                    </div>
                    {{ form_errors(form.stock) }}
                </div>

                <div class="col-md-4">
                    {{ form_label(form.statut) }}
                    <div class="field-group">
                        <i class="fas fa-toggle-on"></i>
                        {{ form_widget(form.statut, {'attr': {'class': 'form-select'}}) }}
                    </div>
                    {{ form_errors(form.statut) }}
                </div>
            </div>
        </div>

        <!-- MEDIA -->
        <div class="form-section">
            <div class="section-title">
                <i class="fas fa-image"></i> Média
            </div>

            <div class="col-12">
                {{ form_label(form.imageFile) }}
                <div class="field-group">
                    <i class="fas fa-upload"></i>
                    {{ form_widget(form.imageFile, {'attr': {'class': 'form-control'}}) }}
                </div>
                {{ form_errors(form.imageFile) }}
            </div>
        </div>

        <!-- ACTIONS -->
        <div class="d-flex justify-content-between mt-3">
            <a href="{{ path('produit_index') }}" class="btn btn-cancel">Annuler</a>
            <button class="btn btn-submit">{{ produit.id ? 'Mettre à jour' : 'Créer' }}</button>
        </div>

    </div>
</div>
{{ form_end(form) }}
</div>
{% endblock %}
